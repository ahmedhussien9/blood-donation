<div class="wrapper cpc">
  <div class="wrapper__header">
    <h1 class="main-title">CBC Test</h1>
  </div>
  <ng-container *ngIf="loading">
    <app-loader
      message="Please wait while the barcode is being scanned ..."
    ></app-loader>
  </ng-container>

  <mat-horizontal-stepper [linear]="true" #stepper *ngIf="!loading">
    <!-- -------------------- 1 start------------------- -->

    <mat-step label="Barcode Scan Data">
      <!-- <ng-template matStepLabel>Fill out your name</ng-template> -->

      <!-- <ng-template matStepLabel>Barcode Scan Data</ng-template> -->
      <div class="step one">
        <!-- <p>Barcode Scan Data</p> -->
        <app-infoTable [list]="list"></app-infoTable>
      </div>
      <div class="d-flex-between">
        <button
          (click)="showDonorDateBtnsHandler(false)"
          mat-button
          matStepperNext
          class="btn success-color"
        >
          Confirm
        </button>
      </div>
    </mat-step>
    <!-- -------------------- 1 end------------------- -->

    <!-- -------------------- 2 start------------------- -->
    <mat-step label="Donor Questionnaire    ">
      <div class="step step-tow stepper-tow">
        <mat-horizontal-stepper #stepper>
          <mat-step label="Fill out your address">
            <!-- Questions section -->
            <div class="stepper questions">
              <div class="header">
                <p>Questions</p>
                <p>Personal Information</p>
              </div>

              <div class="row ">
                <div class="col-md-4 ">
                  <app-infoTable [list]="list3"></app-infoTable>
                </div>
                <div class="col-md-5 offset-2 ">
                  <app-infoTable [list]="list2"></app-infoTable>
                </div>

                <div class="col-12 d-flex-between">
                  <button mat-button matStepperPrevious class="btn">
                    Back
                  </button>
                  <div>
                    <button
                      mat-button
                      matStepperNext
                      class="success-color ml-3"
                    >
                      Confirm
                    </button>
                    <button mat-button class="btn ">
                      Modify
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </mat-step>
          <mat-step>
            <!-- Health section -->
            <div class="stepper Health">
              <div class="header">
                <p>Questions</p>
                <p>Health Assessment</p>
              </div>
              <div class="row ">
                <h5 class="section-title">
                  Please tick the appropriate answer to each question:
                </h5>
              </div>

              <div
                class="row "
                *ngFor="let question of questionList; let i = index"
              >
                <div class="col-md-6 ">
                  <label id="example-radio-group-label"
                    >{{ i + 1 }} -{{ question.name }}</label
                  >
                </div>
                <div class="col-md-5 offset-1 ">
                  <mat-radio-group aria-label="Select an option">
                    <mat-radio-button
                      *ngFor="let option of question.options"
                      class="option"
                      [value]="option.value"
                      >{{ option.name }}</mat-radio-button
                    >
                  </mat-radio-group>
                </div>
              </div>

              <div class="row ">
                <div class="col-12 d-flex-between">
                  <button mat-button matStepperPrevious class="btn">
                    Back
                  </button>
                  <div>
                    <button
                      mat-button
                      matStepperNext
                      class="success-color ml-3"
                    >
                      Confirm
                    </button>
                    <button mat-button class="btn ">
                      Modify
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </mat-step>
          <mat-step>
            <!-- Health section -->
            <div class="stepper Risk">
              <div class="header">
                <p>Questions</p>
                <p>Risk Assessment</p>
              </div>
              <div class="row ">
                <h5 class="section-title">
                  Please tick the appropriate answer to each question:
                </h5>
              </div>

              <div
                class="row "
                *ngFor="let question of questionList; let i = index"
              >
                <div class="col-md-6 ">
                  <label id="example-radio-group-label"
                    >{{ i + 1 }} -{{ question.name }}</label
                  >
                </div>
                <div class="col-md-5 offset-1 ">
                  <mat-radio-group aria-label="Select an option">
                    <mat-radio-button
                      *ngFor="let option of question.options"
                      class="option"
                      [value]="option.value"
                      >{{ option.name }}</mat-radio-button
                    >
                  </mat-radio-group>
                </div>
              </div>
              <div class="row ">
                <div class="col-12 d-flex-between">
                  <button mat-button matStepperPrevious class="btn">
                    Back
                  </button>
                  <div>
                    <button
                      mat-button
                      matStepperNext
                      class="success-color ml-3"
                      (click)="showDonorDateBtnsHandler(true)"
                    >
                      Confirm
                    </button>
                    <button mat-button class="btn ">
                      Modify
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </mat-step>

          <mat-step>
            <!-- Declaration section -->
            <div class="stepper Declaration">
              <div class="header">
                <p>Questions</p>
                <p>Declaration</p>
              </div>
              <div class="row ">
                <h5 class="section-title">
                  Please do not sign until you have answered all the questions
                  and read the declaration below:
                </h5>
              </div>

              <div class="row ">
                <div class="col-md-12 ">
                  <ul>
                    <li>
                      I confirm that, to the best of my knowledge, I have
                      answered all the questions accurately, and I consider my
                      blood safe for the transfusion to a patient.
                    </li>
                    <li>
                      I confirm that I am over the age of 18 years.
                    </li>
                  </ul>
                </div>
                <div class="col-12  ">
                  <div class="signature">
                    <app-button-icon
                      title="Donor Signature "
                      (click)="openDonorDialog()"
                      customClass=""
                    ></app-button-icon>
                    <app-button-icon
                      title="Staff Signature "
                      (click)="openStaffDialog()"
                      customClass=""
                    ></app-button-icon>
                  </div>
                </div>
              </div>
              <div class="row ">
                <div class="col-12 d-flex-between">
                  <button mat-button matStepperPrevious>Back</button>
                </div>
              </div>
            </div>
          </mat-step>
        </mat-horizontal-stepper>
        <div *ngIf="showDonorDateBtns">
          <button
            mat-button
            matStepperNext
            class="btn success-color"
            (click)="showDonorDateBtnsHandler(true)"
          >
            cpc result
          </button>
        </div>
      </div>
    </mat-step>
    <!-- -------------------- 2 end------------------- -->

    <!-- -------------------- 3 start------------------- -->
    <mat-step>
      <ng-template matStepLabel>CBC Results </ng-template>
      <p>Donor Date</p>
      <div class="row">
        <div class="col-6">
          <app-infoTable [list]="list2"></app-infoTable>
          <div>
            <h3>Test Results:</h3>
            <img
              width="90%"
              src="https://www.researchgate.net/profile/Laurie-Carlson/publication/232872362/figure/tbl1/AS:670721684553743@1536923919660/Q3-Means-and-Standard-Deviations-for-All-CBC-Scales-and-Subscales-Across-All.png"
            />
          </div>
        </div>
        <div class="col-6">
          <div class="decision-form"> 
            <form>
              <h5>Decision</h5>
              <mat-radio-group >
                <mat-radio-button value="1">Accept</mat-radio-button>
                <mat-radio-button value="2">Defer</mat-radio-button>
              </mat-radio-group>
  
              <mat-form-field class="example-full-width" appearance="fill">
                <mat-label>Blood Pressure :</mat-label>
                <input matInput #input maxlength="100" placeholder="Blood Pressure">
              </mat-form-field>
  
              <mat-form-field class="example-full-width"  appearance="fill">
                <mat-label>Hemoglobin/Hematocrit: </mat-label>
                <input matInput #input maxlength="100" placeholder="Hemoglobin/Hematocrit">
              </mat-form-field>
  
              <mat-form-field class="example-full-width"  appearance="fill">
                <mat-label>Deferral Period:              </mat-label>
                <input matInput #input maxlength="100" placeholder="Deferral Period">
              </mat-form-field>
  
              <mat-form-field class="example-full-width"  appearance="fill">
                <mat-label>Reason for Deferral: </mat-label>
                <input matInput #input maxlength="100" placeholder="Reason for Deferral">
              </mat-form-field>

              <app-button-icon
              title="Submit"
              (click)="submit()"
              customClass="success-color"
            ></app-button-icon>
            </form>
             
          </div>
        </div>
      </div>
    
      <div class="d-flex-between">
        <button mat-button matStepperPrevious class="btn">Back</button>
        <app-button-icon *ngIf="nextDonor"
          title="Next Donor"
          (click)="submitEvent()"
          customClass="success-color"
        ></app-button-icon>
      </div>
    </mat-step>
    <!-- -------------------- 3 end------------------- -->
  </mat-horizontal-stepper>

  <!-- <ng-container *ngIf="!loading">
    <div class="tabelContainer">
      <table class="table">
        <thead>
          <tr>
            <th>id</th>
            <th>Name</th>
            <th>Image</th>
            <th>ID Number</th>
            <th>Phone</th>
            <th>Generate Barcode</th>
            <th>Barcode</th>
            <th>Status</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="
              let data of mockData
                | paginate
                  : {
                      itemsPerPage: 10,
                      currentPage: page,
                      totalItems: totalItems
                    };
              let i = index
            "
            style="cursor: pointer"
          >
            <td>{{ i + 1 }}</td>
            <td>{{ data.name }}</td>
            <td>{{ data.emirateId }}</td>
            <td>{{ data.mobile }}</td>
            <td>+2010000220808</td>
            <td>
              <button (click)="openDialogBarCode(data)" class="btn">
                <i class="fas fa-print"></i>
              </button>
            </td>
            <td>
              <img
                src="https://www.pngplay.com/wp-content/uploads/2/Barcode-Transparent-PNG.png"
                height="100px"
              />
            </td>

            <td>Pending</td>
            <td>
              <button mat-icon-button [matMenuTriggerFor]="menu">
                <mat-icon>more_vert</mat-icon>
              </button>
              <mat-menu #menu="matMenu">
                <button mat-menu-item (click)="approveStudent(data.id)">
                  <mat-icon>done</mat-icon>
                  <span>{{ "Approve" | translate }}</span>
                </button>
              </mat-menu>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <pagination-controls
      [previousLabel]="'Preview' | translate"
      [nextLabel]="'Next' | translate"
      (pageChange)="getPage($event)"
    >
    </pagination-controls>
  </ng-container> -->
</div>
